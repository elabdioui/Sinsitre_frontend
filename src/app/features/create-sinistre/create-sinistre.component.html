<!-- src/app/features/create-sinistre/create-sinistre.component.html -->

<div class="container">
  <div class="card">
    <div class="card-header">
      <h2>üìã D√©clarer un Sinistre</h2>
    </div>

    <div class="card-body">
      <!-- Messages d'alerte -->
      <div *ngIf="error" class="alert alert-danger">
        <strong>‚ùå Erreur:</strong> {{ error }}
      </div>

      <div *ngIf="success" class="alert alert-success">
        <strong>‚úÖ Succ√®s:</strong> {{ success }}
      </div>

      <!-- Formulaire -->
      <form (ngSubmit)="onSubmit()" #sinistreForm="ngForm">
        <!-- Description -->
        <div class="form-group">
          <label for="description">Description du sinistre *</label>
          <textarea
            id="description"
            name="description"
            [(ngModel)]="sinistre.description"
            class="form-control"
            rows="5"
            placeholder="D√©crivez en d√©tail les circonstances du sinistre..."
            required
            minlength="10"
            [disabled]="loading"
          ></textarea>
          <small class="form-text">
            Minimum 10 caract√®res ({{ sinistre.description.length }}/10)
          </small>
        </div>

        <!-- Montant demand√© -->
        <div class="form-group">
          <label for="montantDemande">Montant demand√© (‚Ç¨) *</label>
          <input
            type="number"
            id="montantDemande"
            name="montantDemande"
            [(ngModel)]="sinistre.montantDemande"
            class="form-control"
            placeholder="Ex: 5000"
            required
            min="1"
            max="1000000"
            [disabled]="loading"
          />
          <small class="form-text">
            Montant maximum: 1 000 000 ‚Ç¨
          </small>
        </div>

        <!-- ID Contrat (optionnel) -->
        <div class="form-group">
          <label for="contratId">Num√©ro de contrat (optionnel)</label>
          <input
            type="number"
            id="contratId"
            name="contratId"
            [(ngModel)]="sinistre.contratId"
            class="form-control"
            placeholder="Ex: 12345"
            [disabled]="loading"
          />
        </div>

        <!-- Boutons -->
        <div class="form-actions">
          <button
            type="submit"
            class="btn btn-primary"
            [disabled]="loading || !sinistreForm.valid"
          >
            <span *ngIf="loading" class="spinner"></span>
            {{ loading ? 'Envoi en cours...' : 'D√©clarer le sinistre' }}
          </button>

          <button
            type="button"
            class="btn btn-secondary"
            (click)="resetForm()"
            [disabled]="loading"
          >
            R√©initialiser
          </button>

          <a routerLink="/sinistres" class="btn btn-outline">
            Annuler
          </a>
        </div>
      </form>
    </div>
  </div>

  <!-- Aide -->
  <div class="info-box">
    <h3>üí° Conseils pour votre d√©claration</h3>
    <ul>
      <li>D√©crivez pr√©cis√©ment les circonstances du sinistre</li>
      <li>Indiquez la date et l'heure approximative</li>
      <li>Mentionnez les d√©g√¢ts mat√©riels constat√©s</li>
      <li>Joignez si possible des photos ou documents</li>
      <li>Estimez au mieux le montant des dommages</li>
    </ul>
  </div>
</div>
